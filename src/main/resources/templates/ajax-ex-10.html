<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>10_get 요청하기</title>

	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>

<body>
	<h1>10_post 요청하기: @ResponseEntity를 사용해서 List, http 상태코드</h1>
	<button onclick="ex10Fn()">ex10 함수 호출</button>

	<script type="text/javascript">
		const ex10Fn = () => {
			//console.log("함수호출 성공");
			//alert("함수호출 성공");

			// 서버와 동기 통신  : 서버에서 전체 페이지가 랜더링 되어서 client로 전송, 페이지가 refresh
			// 서버와 비동기 통신 : client의 특정 부분만 변경
			var val1 = "Hello Ajax 10"

			// Javascript 객체 타입
			const params = {
				param1: val1,
				param2: "안녕 10"
			}

			$.ajax({
				url: "/ajax/ex10",		// 서버에게 요청을 보내는 URL
				type: "post",			// 서버에게 요청을 보내는 방식: get, post, ...
				// data : 서버로 전송할 data
				data: JSON.stringify(params),
				contentType: "application/json",
				success: function (res, state) {	// 요청이 성공되었을때 서버에서 보내는 값을 받음
					// res : 서버에서 보내는 값을 할당
					console.log("1 객체 : " + res[0].param1);
					console.log("1 객체 : " + res[0].param2);
					console.log("2 객체 : " + res[1].param1);
					console.log("2 객체 : " + res[1].param2);
					console.log("3 객체 : " + res[2].param1);
					console.log("3 객체 : " + res[2].param2);
					console.log("http 상태코드 : " + state);
				},
				error: function () {	// 서버와 통신이 실패 했을때 작동
					console.log("서버와 통신 실패");
					alert("서버와 통신 실패");
				}
			});
		}
	</script>
</body>

</html>